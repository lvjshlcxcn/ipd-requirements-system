# 📋 AI 洞察删除功能 - 手动测试指南

## 🎯 测试目标

验证 AI 洞察列表中的删除功能是否正常工作。

## 📊 测试数据状态

✅ **后端 API 测试已完成并成功**
- 已创建 18 条测试洞察数据
- API 删除功能已验证成功
- 删除端点: `DELETE /api/v1/insights/{id}`

## 🧪 前端手动测试步骤

### 步骤 1: 打开应用

1. 在浏览器中访问: **http://localhost:5173**
2. 页面会自动加载

### 步骤 2: 登录系统

如果需要登录：
- **用户名**: `admin`
- **密码**: `admin123`

### 步骤 3: 导航到洞察列表

1. 在左侧菜单中找到"**洞察**"或"**AI洞察**"选项
2. 点击进入洞察列表页面

### 步骤 4: 查看列表

你应该能看到：
- 📊 页面标题: "AI 洞察分析列表"
- 📝 洞察列表，包含以下列：
  - 编号 (如: Ai-insight-00016)
  - 文本预览
  - 分析模式 (深度分析/快速分析)
  - 状态 (草稿/已确认/已关联)
  - 文本长度
  - 创建时间
  - **操作列** (包含"查看"和"删除"按钮)

### 步骤 5: 测试删除功能

1. ✅ **找到删除按钮**
   - 在操作列中应该有红色的"删除"按钮
   - 按钮旁边有删除图标 🗑️

2. ✅ **点击删除按钮**
   - 应该弹出确认对话框
   - 对话框标题: "确认删除"
   - 对话框内容显示:
     - 洞察编号
     - 警告信息: "此操作将同时删除关联的故事板数据，且无法恢复"
   - 两个按钮: "取消" 和 "确定"

3. ✅ **确认删除**
   - 点击"确定"按钮
   - 对话框关闭

4. ✅ **验证结果**
   - 右上角显示成功提示: "删除成功" ✅
   - 列表自动刷新
   - 被删除的洞察从列表中消失

### 步骤 6: 测试取消删除

1. 点击另一条记录的"删除"按钮
2. 在确认对话框中点击"**取消**"按钮
3. ✅ 验证:
   - 对话框关闭
   - 洞察记录仍然存在
   - 没有删除提示消息

## 🎨 预期界面元素

### 删除按钮样式
- 颜色: 红色 (danger)
- 图标: 🗑️ DeleteOutlined
- 文本: "删除"

### 确认对话框样式
- 使用 Ant Design Modal.confirm
- "确定"按钮: 红色危险按钮
- "取消"按钮: 默认样式

## ✅ 测试检查清单

- [ ] 删除按钮显示在操作列中
- [ ] 点击删除按钮弹出确认对话框
- [ ] 对话框显示正确的洞察编号
- [ ] 对话框显示警告信息
- [ ] 点击"确定"后成功删除
- [ ] 显示"删除成功"提示消息
- [ ] 列表自动刷新
- [ ] 被删除的记录从列表消失
- [ ] 点击"取消"不执行删除

## 🔍 可能的问题和解决方案

### 问题 1: 列表显示"暂无数据"

**原因**: 可能是 API 认证问题

**解决方案**:
1. 确保已正确登录
2. 刷新页面 (F5)
3. 检查浏览器控制台是否有错误

### 问题 2: 没有看到删除按钮

**原因**: 前端代码可能没有正确加载

**解决方案**:
1. 检查前端日志: `tail -f logs/frontend.log`
2. 重启前端服务:
   ```bash
   ./dev-stop.sh
   ./dev-start.sh
   ```
3. 清除浏览器缓存并刷新

### 问题 3: 点击删除后没有反应

**原因**: JavaScript 错误

**解决方案**:
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 标签页的错误信息
3. 查看 Network 标签页，检查 API 请求

## 📱 浏览器开发者工具使用

### 查看 API 请求

1. 打开开发者工具 (F12)
2. 切换到 **Network** 标签
3. 点击删除按钮
4. 查找 `DELETE /api/v1/insights/{id}` 请求
5. 验证:
   - 请求方法: DELETE
   - 状态码: 204 No Content
   - 响应时间: < 1秒

### 查看控制台日志

1. 打开开发者工具 (F12)
2. 切换到 **Console** 标签
3. 应该能看到:
   - 删除成功的日志 (如果有)
   - 没有红色错误信息

## 🎉 成功标准

如果满足以下所有条件，则删除功能测试通过：

✅ 后端 API 返回 204 状态码
✅ 前端显示删除按钮
✅ 确认对话框正常显示
✅ 删除成功后显示提示消息
✅ 列表自动刷新并移除已删除记录
✅ 取消删除功能正常工作

---

## 📞 如需帮助

如果测试过程中遇到问题，请检查：
1. **后端日志**: `tail -f logs/backend.log`
2. **前端日志**: `tail -f logs/frontend.log`
3. **服务状态**: `./dev-status.sh`
