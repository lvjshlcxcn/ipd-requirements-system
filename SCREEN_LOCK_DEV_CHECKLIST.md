# 屏幕锁定功能开发检查清单

## 开发检查
- [x] Task 1: 扩展 useAuthStore
  - [x] 添加 isLocked, lockedUsername 状态
  - [x] 添加 lockScreen, unlockScreen, loadLockState 方法
  - [x] 本地存储持久化锁定状态

- [x] Task 2: 扩展 useSessionTimeout
  - [x] 支持 lock 模式
  - [x] 添加 lockTimeoutMs 配置
  - [x] 添加 onLock 回调
  - [x] 锁定后重置会话超时（避免重复锁定）

- [x] Task 3: 创建 ScreenLockModal
  - [x] 锁定界面 UI 设计
  - [x] 密码验证逻辑
  - [x] 错误处理（5次失败后登出）
  - [x] 成功解锁反馈

- [x] Task 4: 集成到 MainLayout
  - [x] 组件挂载时加载锁定状态
  - [x] 集成锁定模式的会话超时
  - [x] 添加锁定倒计时警告 Modal
  - [x] 渲染 ScreenLockModal 组件

- [x] Task 5: 添加 E2E 测试
  - [x] 测试密码解锁流程
  - [x] 测试锁定状态持久化

- [x] Task 6: 更新文档
  - [x] 用户指南
  - [x] 开发检查清单

## 测试检查

### 单元测试
- [x] useAuthStore 扩展测试通过
- [x] useSessionTimeout 扩展测试通过
- [x] ScreenLockModal 组件测试通过
- [x] MainLayout 集成测试通过

### 集成测试
- [x] 所有单元测试通过
- [x] 组件间集成正常

### E2E 测试
- [ ] E2E 测试需要手动执行（需要运行开发服务器）
- [ ] 测试密码解锁流程
- [ ] 测试锁定状态持久化

## 手动测试
- [ ] 1 分钟自动锁定
  - [ ] 等待 1 分钟无操作
  - [ ] 验证屏幕自动锁定
  - [ ] 验证锁定倒计时警告（10秒）

- [ ] 密码解锁
  - [ ] 输入正确密码解锁
  - [ ] 输入错误密码显示错误提示
  - [ ] 5 次错误后强制登出

- [ ] 刷新页面保持锁定
  - [ ] 锁定后刷新页面
  - [ ] 验证仍然处于锁定状态

- [ ] 会话超时兜底
  - [ ] 锁定后再等待 2 分钟
  - [ ] 验证自动登出（安全兜底）

## 部署前检查
- [ ] 所有测试通过
- [ ] 代码审查完成
- [ ] 文档更新完成
- [ ] 无 console 错误或警告
- [ ] 性能测试通过（无明显性能影响）

## 已知问题
- 无

## 后续优化建议
- 考虑添加手动锁定按钮（用户主动锁定）
- 考虑添加锁定屏幕背景图片或动画
- 考虑添加锁定日志记录（安全审计）
- 考虑支持生物识别解锁（如果平台支持）
